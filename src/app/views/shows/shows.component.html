<h2>{{ title | uppercase }}</h2>

<mat-accordion *ngIf="tvShows">
  <mat-expansion-panel *ngFor="let show of tvShows">
    <mat-expansion-panel-header>
      <mat-panel-title>
        <h5 [innerHTML]="show.name"></h5>
      </mat-panel-title>
      <mat-panel-description>
        <p *ngIf="show.premiered.isValid()">{{show.premiered | date}}</p>
      </mat-panel-description>
      <mat-panel-description>
        <!--dynamicStyles() changes status color according to status-->
        <p [innerHTML]="'Status: ' + show.status" [ngStyle]="dynamicStyles(show.status)"></p>
      </mat-panel-description>
    </mat-expansion-panel-header>
    <ng-template matExpansionPanelContent>
      <div class="show-content">
        <img *ngIf="show.image" alt="{{show.name}} cover" [src]="show.image">
        <div class="show-info">
          <div class="summary" [innerHTML]="show.summary"></div>
          <div class="details">
            <p><strong>Language:</strong> <em>{{show.language}}</em></p>
            <h4 *ngIf="show.rating"><mat-icon>star_rate</mat-icon>{{show.rating}}</h4>
          </div>
          <div class="genres">
            <strong>Genres:</strong> <small *ngFor="let genre of show.genres">{{genre}}, </small>
          </div>
          <div class="episode-info">
            <p *ngIf="show.prevEpisode"><strong>Previous Episode:</strong> {{show.prevEpisode.airDate | date}}</p>
            <p *ngIf="show.nextEpisode"><strong>Next Episode:</strong> {{show.nextEpisode.airDate | date:'MMMM d, y, HH:mm'}}</p>
          </div>
        </div>
      </div>
      <mat-action-row>
        <a [href]="show.officialSite" mat-raised-button color="primary" target="_blank" style="color: white">Visit site</a>
        <button mat-raised-button color="accent" [routerLink]="'/show/' + show.id">Details</button>
      </mat-action-row>
    </ng-template>
  </mat-expansion-panel>
</mat-accordion>
